
# Paths ----------------------------------------------
set folder           = ~/mail                # mailbox location
set alias_file       = ~/.mutt/alias         # where to store aliases
set header_cache     = ~/.mutt/cache/headers # where to store headers
set message_cachedir = ~/.mutt/cache/bodies  # where to store bodies
set certificate_file = ~/.mutt/certificates  # where to store certs
set mailcap_path     = ~/.mutt/mailcap       # entries for filetypes
set tmpdir           = ~/.mutt/tmp           # where to keep temp files
set signature        = ~/.mutt/signature     # my signature file

# SSL hardening
set ssl_force_tls=yes
set ssl_starttls=yes
#set ssl_use_sslv2=no
set ssl_use_sslv3=no
set ssl_use_tlsv1=no
#set ssl_use_tlsv1_1=no
#set ssl_use_tlsv1_2=yes
set ssl_verify_dates=yes
set ssl_verify_host=yes

# Sidebar Options ------------------------------------
set sidebar_visible=no
set sidebar_width=16
#set sidebar_delim=']'
#set sidebar_sort=yes
#set sidebar_folderindent=yes
#set sidebar_indentstr=""
set sidebar_format='%B%?F? [%F]?%* %?N?(%N)?%S'
#set sidebar_shortpath=yes
color sidebar_new cyan default # color of folders with new mail

set wait_key = no			# shut up, mutt
set mbox_type = Maildir  	# mailbox type
set timeout = 3          	# idle time before scanning
set mail_check = 0       	# minimum time between scans
unset move               	# gmail does that
set delete               	# don't ask, just do
unset confirmappend      	# don't ask, just do!
set quit                 	# don't ask, just do!!
unset mark_old           	# read/new is good enough for me
set beep_new             	# bell on new mails
set pipe_decode          	# strip headers and eval mimes when piping
set thorough_search      	# strip headers and eval

# Various settings ---------------------------
set   abort_nosubject=no	# Let me send messages with an empty subject
set   abort_unmodified=no	# Let me send empty messages
unset allow_8bit			# Produce correct MIME
unset arrow_cursor			# Use the bar cursor
#set   askcc					# Ask me about CCs
#set   charset=iso-8859-1	# The local character set
set   confirmcreate			# Ask me about creating new files
unset confirmappend			# Don't ask me about appending to files
set   edit_headers			# I want to edit the headers.
unset envelope_from			# Don't set messages' envelope-from header.
set   fcc_clear				# Store local copies of messages in the clear.
set   followup_to			# Create Mail-Followup-To headers.
unset force_name			# Don't create save folders which don't exist.
set   forward_decode		# Decode messages when forwarding.
set   forward_decrypt		# Decrypt messages when forwarding.
#set   nohelp				# No help line.
set   include=yes			# Always include a copy when replying.
#set   mark_old				# Distinguish between seen (but unread) and new messages
unset metoo					# Remove me from CC headers.
set   mime_forward=ask-no	# Ask me whether or not to create a MIME-encapsulated forward
set   move=no				# Don't use mbox
set   pgp_replyencrypt		# Encrypt when replying to encrypted messages.
set   pgp_replysignencrypted# Sign when replying to encrypted messages.
set   pgp_replysign			# Sign when replying to signed messages.
set   pgp_timeout=3600		# Forget the PGP passphrase after an hour.
set   pipe_decode			# Decode messages I pipe to commands, typically to patch(1).
set   print=ask-no			# Don't waste paper
set   read_inc=50			# Progress indicator when reading folders.
set   recall=ask-no			# When I say "compose", ask me whether I want to continue
							# composing a postponed message.
set   reply_to=ask-yes		# Ask me whether I want to honor users' reply-to headers.
set   reverse_alias			# Use aliases to display real names on the index.
set   sig_dashes			# Add dashes above my signature
set   smart_wrap			# Try to be smart when wrapping around lines in the pager
set   suspend=no			# Don't suspend - I usually run mutt like this: "xterm -e mutt"
set   tilde					# Indicate empty lines in the pager.
unset use_domain			# Don't append a domain to addresses.
set   write_inc=50			# Progress indicator when writing folders.
							# query feature.
set   sendmail_wait=-1		# Put sendmail (i.e., postfix) to the background.
set   encode_from			# "From " in the beginning of a line triggers quoted-printable
set   nowait_key			# Return immediately from external programs
set   nobeep				# Shut up. ;-)
#set   header				# Include the message header when replying.
set   ignore_list_reply_to	# Ignore Reply-To headers pointing to mailing lists.
							# nicely with maildir folders.
set   rfc2047_parameters	# Sometimes, I get mails which use a bogus encoding for
							# MIME parameters.  Setting this shouldn't harm.
set folder_format="%2C %t %N %8s %d %f"
#set attribution="On %d, %n wrote:"
set attribution="On %{%d.%m.%y %H:%M}, %n wrote:"

source ~/.mutt/themes/theme_js

unauto_view
auto_view text/html #if there is only html dump that
alternative_order text/plain text/enriched text/html # this helps with multipart messages

# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]─%V──[%r%m messages%?n? \
(%n new)?%?d? (%d to delete)?%?t? (%t tagged)? \
]───%>─%?p?( %p postponed )?─── %l|%L"

# Header Options -------------------------------------
ignore *                                # ignore all headers
unignore from: to: cc: date: subject:   # show only these
unhdr_order *                           # some distros order things by default
hdr_order from: to: cc: date: subject:  # and in this order

# Index View Options ---------------------------------
set date_format="%d.%m.%y"
#set date_format="%d.%m.%y %H:%M"
#set index_format="%2C | %Z [%d] %-30.30F (%-4.4c) %s"
#set index_format="%4C %Z %[%b.%d] %-15.15L (%4c) %s"
#set index_format="%Z %D %-20.20L %4c %s"
#set index_format="%Z %D %-15.15L %?M?(#%03M)&(%4l)? %?y?(%.20Y) ?%s"
set index_format="%Z %D %-15.15L %4c %?y?(%.20Y) ?%s"
set forw_format="[fwd] %s (from: %a)"# A different subject for forwarded messages
# A regular expression to detect replies
#set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
set reply_regexp="^((re([\\[0-9\\]+])*|aw):[ \t]*)+[ \t]*"
# Recognize quotes in the pager.
set quote_regexp="^ *[a-zA-Z]*[>|][>:|]*"
# Two columns, landscape, fancy header.
set print_command="enscript -2 -r -G"
# Use the Little Brother's Database with the external
set query_command="lbdbq %s"
# Threads
set sort = threads
set strict_threads = yes  #disable pseudo threads
set sort_browser="reverse-date"
#set sort_aux = last-date-received
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump		# don't collapse on an unread message
set sort_re				# thread based on regex
folder-hook . "exec collapse-all" # start with threads collapsed

# Pager View Options ---------------------------------
set pager_index_lines = 10 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"

# query ----------------------------------------------------------
set query_command="$HOME/.mutt/nottoomuch-addresses.sh %s"
#set query_command="$HOME/.mutt/ntmw.sh %s"
set query_format="%t %-25.24n %a %e"

# set editor = "nvim +/^$/ -c ':setlocal spell spelllang=en_us textwidth=72'"
set editor = "vim +/^$/ -c ':setlocal spell spelllang=en_us textwidth=72'"

# Alternate email addresses.
alternates ^joel@estamine\.net$ ^joel42silva@gmail\.com$
set reverse_name=yes
set reverse_realname=no

set spoolfile=+gmail/inbox #Default Inbox

# Mutt Sources  --------------------------------------
# folder-hook estamine source ~/.mutt/accounts/estamine
# folder-hook gmail source ~/.mutt/accounts/gmail
# folder-hook gsi source ~/.mutt/accounts/gsi
source ~/.mutt/macros
source ~/.mutt/mailboxes # Mailboxes to show in the sidebar.
source ~/.mutt/gpg.rc
source ~/.mutt/crypto
source ~/.mutt/accounts/gmail
source ~/.mutt/accounts/estamine
# source ~/.mutt/hooks

